<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content><meta name=keywords content="local,standalone,self-hosted,error,troubleshooting"><meta property="og:url" content="https://docs.mysurvey.solutions/headquarters/config/db-connection-errors/"><meta property="og:site_name" content="Survey Solutions | Documentation"><meta property="og:title" content="DB connection errors"><meta property="og:description" content="The following error may be encountered during the server startup, when it fails to establish connection to the database server:
Note, that since the message is displayed on a publicly accessible page, it does not elaborate the specific reason for the problem.
When the server displays the above message, it is incapacitated and the error needs to be fixed asap. This is especially critical if the server is being utilized for CAWI surveys, where the respondents following the link in the invitation will likely be lost if they encounter this message instead of the survey form to fill out. Also the interviewers will not be able to synchronize their tablets, neither to submit collected interviews, nor to receive new assignments. In fact, because the database is storing the information that is needed to authenticate the users, no activity can be undertaken on the server that requires authentication."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="headquarters"><meta property="article:published_time" content="2021-06-22T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-23T14:55:14+03:00"><meta property="og:image" content="https://docs.mysurvey.solutions/img/logo.png"><link rel=icon href=/img/favicon/favicon-support-1.png type=image/png sizes=16x16><link rel=icon href=/img/favicon/favicon-support-1-48-win-ico.png type=image/png sizes=48x48><link rel=icon href=/img/favicon/favicon-support-1-158-General-use-iOS-Android.png type=image/png sizes=152x152><link rel=icon href=/img/favicon/favicon-support-1-196-Chrome-for-Android.png type=image/png sizes=196x196><link rel=icon href=/img/favicon/favicon-support-1-558-win10-tile.png type=image/png sizes=558x558><title>DB connection errors</title><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel=stylesheet><link href=/css/all.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css rel=stylesheet></head><body><header class="px-md-3 pt-3"><div class=container><div class=row><div class="mb-3 col-lg-6 col-md-12"><a class="navbar-brand text-white pr-0 mr-0 float-left" href=https://mysurvey.solutions/ target=_blank><img src=/img/logo.png alt="Survey Solutions" class=float-left>
<span class="float-left ml-2">Survey<br>Solutions</span>
</a><a class="navbar-text text-white pl-sm-4 ml-sm-4 pl-2 ml-2 float-left" href=https://docs.mysurvey.solutions/>Documentation and knowledge base</a></div><script type=text/template id=my-custom-menu-template>
    <div class="aa">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="docs-tab" data-toggle="tab" href="#docs" role="tab" aria-controls="docs" aria-selected="true">Articles</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="forum-tab" data-toggle="tab" href="#forum" role="tab" aria-controls="forum" aria-selected="false">Forum topics</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="aa-dataset-docs tab-pane fade show active" id="docs" role="tabpanel" aria-labelledby="docs-tab"></div>
            <div class="aa-dataset-forum tab-pane fade" id="forum" role="tabpanel" aria-labelledby="forum-tab"></div>
        </div>
    </div>
</script><div class="col-lg-6 col-md-12 pt-2 mb-4 mb-lg-3"><form class=form-inline onsubmit=return!1><div class="input-group search"><input type=text class="form-control w-100" placeholder="Have a Question? Ask or enter a search term here." id=aa-search-input></div></form></div></div></div></header><main class="container mb-3"><nav aria-label=breadcrumb><ol class="breadcrumb bg-transparent pl-0"><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/headquarters/>Headquarters</a></li><li class=breadcrumb-item><a href=/headquarters/config/>Setup and Configuration</a></li><li class="breadcrumb-item active" aria-current=page>DB connection errors</li></ol></nav><div class=mb-4><article class="article d-block w-100"><div class="mb-5 pb-1 d-block w-100 page-title d-flex align-items-end"><h2 class="mb-3 mr-auto pr-3">DB connection errors</h2><div class="data text-right">June 23, 2021</div></div><div class=article-content><p>The following error may be encountered during the server startup, when it fails
to establish connection to the database server:</p><center><a href=images/db_connection_error.png><img src=images/db_connection_error.png width=50%></a></center><br><p>Note, that since the message is displayed on a publicly accessible page, it
does not elaborate the specific reason for the problem.</p><p>When the server displays the above message, it is incapacitated and the error
needs to be fixed asap. This is especially critical if the server is being
utilized for CAWI surveys, where the respondents following the link in the
invitation will likely be lost if they encounter this message instead of the
survey form to fill out. Also the interviewers will not be able to synchronize
their tablets, neither to submit collected interviews, nor to receive new
assignments. In fact, because the database is storing the information that is
needed to authenticate the users, no activity can be undertaken on the server
that requires authentication.</p><p>Survey Solutions users (interviewers, supervisors, headquarters, etc.) cannot
address this problem, since they don&rsquo;t have direct access to the web server,
nor to the DB server, but only through Survey Solutions program. Note also
that their actions cannot trigger this problem (at least the developers are
not aware of any way of doing this), it must have been caused by something else.
If they encounter this error, they should notify their superiors, elevating
the message to the person who has access to the OS account on the server
(typically the person who has installed the Survey Solutions, who is installing
the updates, or performs other server maintenance).</p><p>Hence, fixing this error requires access to the machine where Survey Solutions is
installed, and the database server, which may be located on a different machine.</p><p>Conceptually, the problem is in communication between the part that services
the users&rsquo; queries (the web server) and the part that stores the data
(the DB server):</p><center><a href=images/db_connectivity.png><img src=images/db_connectivity.png width=50%></a></center><p>As the message instructs, first inspect the Survey Solutions server logs. They
may point to a specific problem, such as the incorrect password or lack of
connectivity.</p><p>Next inspect the settings of the server, locate the DB connection string, and
try to connect manually to the PostgreSQL DB server using the same account. When
checking this connectivity, it is important to connect to the DB server
specifically from the Web server, not from any other machine, as the network
topology may imply different routing of queries from internal and external
nodes.</p><p>Most common reasons for this problem are:</p><ul><li>the DB server has been shut down or disconnected from the network, while the
web server is still active;</li><li>a firewall or other security facility is preventing connectivity from the
web server to the DB server;</li><li>if this is the first time the Survey Solutions is starting up, check if the
connection string parameters have been entered correctly during the
installation, as typos may have happened while entering the account name,
password or the server address;</li><li>account changes at the DB server: password has been changed,
permissions/roles changed, account removed or disabled;</li><li>if the DB server is hosted in the cloud, the cloud account may be
suspended/disabled because of billing or other reasons.</li></ul><p>Survey Solutions web server component is programmed to retry the call to the DB
server if such a disruption occurs. The message indicates in how many seconds
such a retry attempt will happen next (<em>219 seconds in the screenshot above</em>).</p><p>If the reason for the problem is temporary in nature, and the DB server starts
responding again, then Survey Solutions will pick up that connection and
continue. Still it is recommended to investigate the reason for the disruption.</p></div></article></div></main><footer class="footer pt-3 pb-1 px-sm-3 px-lg-0"><div class="container copyright"><div class=float-left>&#169; 2016-2025 The World Bank Group.<br>All rights Reserved. <a href=https://www.worldbank.org/en/about/legal _target=blank>Legal</a><br><a class=text-primary href=/about/ _target=blank><b class=text-primary>About the team</b></a>
<a class=text-primary href=https://www.capterra.com/p/153927/Survey-Solutions/ target=_blank>Testimonials</a></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js></script><script src=https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js></script><script src=/js/asearch.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js></script><script>$(document).on("click",'[data-toggle="lightbox"]',function(e){e.preventDefault(),$(this).ekkoLightbox({alwaysShowClose:!0})})</script></body></html>