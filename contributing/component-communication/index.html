<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content><meta name=keywords content="development,contributing"><meta property="og:url" content="https://docs.mysurvey.solutions/contributing/component-communication/"><meta property="og:site_name" content="Survey Solutions | Documentation"><meta property="og:title" content="Communication between system components"><meta property="og:description" content="Survey Solutions has several components that communicate with each other at different stages of the survey lifecycle.
See glossary for interpretation of some of the terms, which may have different meaning in other systems.
Survey Solutions Components: Interviewer (Android application) Supervisor (Android application) Tester (Android application) Headquarters (HQ) (Web application) WebTester (Web application) Designer (Web application) These components may communicate with other components of the system."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="contributing"><meta property="article:modified_time" content="2023-03-28T18:42:16-04:00"><meta property="og:image" content="https://docs.mysurvey.solutions/img/logo.png"><link rel=icon href=/img/favicon/favicon-support-1.png type=image/png sizes=16x16><link rel=icon href=/img/favicon/favicon-support-1-48-win-ico.png type=image/png sizes=48x48><link rel=icon href=/img/favicon/favicon-support-1-158-General-use-iOS-Android.png type=image/png sizes=152x152><link rel=icon href=/img/favicon/favicon-support-1-196-Chrome-for-Android.png type=image/png sizes=196x196><link rel=icon href=/img/favicon/favicon-support-1-558-win10-tile.png type=image/png sizes=558x558><title>Communication between system components</title><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel=stylesheet><link href=/css/all.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css rel=stylesheet></head><body><header class="px-md-3 pt-3"><div class=container><div class=row><div class="mb-3 col-lg-6 col-md-12"><a class="navbar-brand text-white pr-0 mr-0 float-left" href=https://mysurvey.solutions/ target=_blank><img src=/img/logo.png alt="Survey Solutions" class=float-left>
<span class="float-left ml-2">Survey<br>Solutions</span>
</a><a class="navbar-text text-white pl-sm-4 ml-sm-4 pl-2 ml-2 float-left" href=https://docs.mysurvey.solutions/>Documentation and knowledge base</a></div><script type=text/template id=my-custom-menu-template>
    <div class="aa">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="docs-tab" data-toggle="tab" href="#docs" role="tab" aria-controls="docs" aria-selected="true">Articles</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="forum-tab" data-toggle="tab" href="#forum" role="tab" aria-controls="forum" aria-selected="false">Forum topics</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="aa-dataset-docs tab-pane fade show active" id="docs" role="tabpanel" aria-labelledby="docs-tab"></div>
            <div class="aa-dataset-forum tab-pane fade" id="forum" role="tabpanel" aria-labelledby="forum-tab"></div>
        </div>
    </div>
</script><div class="col-lg-6 col-md-12 pt-2 mb-4 mb-lg-3"><form class=form-inline onsubmit=return!1><div class="input-group search"><input type=text class="form-control w-100" placeholder="Have a Question? Ask or enter a search term here." id=aa-search-input></div></form></div></div></div></header><main class="container mb-3"><nav aria-label=breadcrumb><ol class="breadcrumb bg-transparent pl-0"><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/contributing/>Contributing</a></li><li class="breadcrumb-item active" aria-current=page>Communication between system components</li></ol></nav><div class=mb-4><article class="article d-block w-100"><div class="mb-5 pb-1 d-block w-100 page-title d-flex align-items-end"><h2 class="mb-3 mr-auto pr-3">Communication between system components</h2><div class="data text-right">March 28, 2023</div></div><div class=article-content><p>Survey Solutions has several components that communicate with each other at different stages of the survey lifecycle.</p><p>See <a href=/faq/glossary/>glossary</a> for interpretation of some of the terms, which may have different meaning in other systems.</p><h2 id=survey-solutions-components>Survey Solutions Components:</h2><ul><li>Interviewer <em>(Android application)</em></li><li>Supervisor <em>(Android application)</em></li><li>Tester <em>(Android application)</em></li><li>Headquarters (HQ) <em>(Web application)</em></li><li>WebTester <em>(Web application)</em></li><li>Designer <em>(Web application)</em></li></ul><p>These components may communicate with other components of the system.</p><p><img src=images/SurveySolutionsCommunication.png alt="Survey Solutions Components communication diagram"></p><p>In the regular data collection flow these are common steps:</p><ol><li>A new <code>Questionnaire</code> is created on <code>Designer</code>.</li><li>The <code>questionnaire</code> is tested using Android <code>Tester</code> and <code>Web-Tester</code>. Both apps <em>communicate</em> with the <code>Designer</code>.
3.The <code>Headquarters</code> application <em>connects</em> to <code>Designer</code> and downloads a questionnaire.</li><li>New assignments are created at <code>Headquarters</code>.</li><li>The <code>Interviewer</code> and <code>Supervisor</code> apps synchronize with <code>Headquarters</code>, send and receive data (multiple occurrences).</li><li>The <code>Interviewer</code> App synchronizes with the <code>Supervisor</code> App.</li></ol><p>Note that not all surveys rely on supervisors using <code>Supervisor App</code> on a mobile
device, correspondingly it is common for the interviewers to synchronize directly
with the server.</p><h2 id=synchronization>Synchronization</h2><h3 id=i-interviewer-and-headquarters-hq>I. Interviewer and Headquarters (HQ)</h3><h4 id=a-initial-step-after-clean-installation>A. Initial step after clean installation</h4><p>After installation user inputs synchronization endpoint (server URL), login name and password.</p><ol><li>The <code>Interviewer App</code> sends request to <code>Headquarters</code> with login and password provided by user.<ul><li>In case if user was not found in the system, password didn&rsquo;t match the user, or the user was locked the <code>Headquarters</code> returns <code>Unauthorized</code> response.</li><li>If user&rsquo;s credentials were successfully validated the server generates a new <code>Token</code> and returns it to the <code>Interviewer App</code>.</li><li>This <code>Token</code> is used for further authorization with <code>Headquarters</code>.</li></ul></li><li>The <code>Interviewer App</code> requests the list of <code>Workspaces</code> from HQ and selects the first one in the received list.</li><li>The <code>Interviewer App</code> requests <code>Headquarters</code> to check if current user has a registered device.<ul><li>If device is not linked (registered) to user the <code>Interviewer App</code> registers the current one.</li></ul></li><li>The <code>Interviewer App</code> checks compatibility with <code>Headquarters</code>, providing device ID and communication protocol version of the application.<ul><li>The <code>Interviewer App</code> also supplies application version in header as agent identifier.</li><li>The <code>Headquarters</code> validates all parameters and replies to the <code>Interviewer</code> whether synchronization is permitted.</li><li>Reasons that don&rsquo;t allow to continue include:<ul><li>user has a different device, linked to profile;</li><li>application should be updated to the latest version;</li><li>the Interviewer application has a later version than the server and cannot be synchronized.</li></ul></li><li>If compatibility check is successful the <code>Interviewer App</code> saves the list of workspaces.</li><li>The <code>Interviewer App</code> requests details about the interviewer and <code>Headquarters</code> <code>tenant Id</code> and saves details.</li></ul></li></ol><h4 id=b-routine-synchronization>B. Routine synchronization</h4><p>After login to the <code>Interviewer App</code>, the dashboard is displayed for the selected workspace. On pressing the <code>Sync</code> button the synchronization starts, which includes the following steps:</p><ol><li>The <code>Interviewer App</code> checks the login information sending request to the server<ul><li>User details are requested and updated;</li><li>Application sends request to the server to verify that sync is permitted;</li><li>Current supervisor is requested from server and updated;</li><li>Application sends statistics to <code>Headquarters</code>.</li></ul></li><li>The <code>Interviewer App</code> requests public encryption key if doesn&rsquo;t not exist in the storage</li><li>The <code>Interviewer App</code> requests mobile device settings from the server and updates values for:<ul><li>partial synchronization,</li><li>web interview URL template,</li><li>parameters for automatic location capture (period and accuracy).</li></ul></li><li>If partial synchronization is enabled, the <code>Interviewer App</code> updates interviews with changes from <code>Headquarters</code>.</li><li>The <code>Interviewer App</code> uploads calendar events created or updated locally (on this mobile device).</li><li>The <code>Interviewer App</code> starts to uploads interviews to the <code>Headquarters</code>: those that are in the status <code>Completed</code>, those switched by the interviewer to CAWI mode, those unsynced yet if partial synchronization is enabled.
For each interview the following items are sent in this order:<ul><li>image files;</li><li>audio files;</li><li>audio audit files;</li><li>interview data.</li></ul></li><li>The <code>Interviewer App</code> synchronizes assignments:<ul><li>The list of assignments is requested from the <code>Headquarters</code>. For each of the assignments to be downloaded the application checks if a local copy of the questionnaire is present and downloads it if necessary.</li><li>The <code>Interviewer App</code> downloads assignments, updates and created new assignments if needed.</li></ul></li><li>Downloading Interviews:<ul><li>The <code>Interviewer App</code> gets the list of interviews from the HQ. Then checks the local list of interviews, removes and creates interviews one by one as necessary.</li><li>For every interview the questionnaire is downloaded if it doesn&rsquo;t exist and then the interview data.</li></ul></li><li>Questionnaires synchronization. The list of questionnaires is retrieved from the server. Local questionnaires (stored on the mobile device) are updated according to the list received from the <code>Headquarters</code>. This may involve local data deletion and updates as required.</li><li>The <code>Interviewer App</code> downloads calendar events.</li><li>The company logo is updated (if it was changed).</li><li>The <code>audit log</code> is sent to the <code>Headquarters</code>.</li><li>Application sends statistics to <code>Headquarters</code>.</li></ol><h3 id=ii-interviewer-and-supervisor>II. Interviewer and Supervisor</h3><p>Routine synchronization</p><h3 id=iii-interviewer-and-supervisor>III. Interviewer and Supervisor</h3><h3 id=iv-headquarters-and-designer>IV. Headquarters and Designer</h3><p>The Headquarters provides UI to enter login and password to connect to Designer and validates them by calling the Designer API. If validation succeeded, it then calls the Designer API to get the list of the questionnaires that this user has access to. Once a particular questionnaire is selected to be imported and import is requested, the following actions are performed:</p><ol><li>The user&rsquo;s credentials to access the Designer are validated.</li><li>The Headquarters prepares to import questionnaire in exclusive mode (note that the same questionnaire cannot be imported simultaneously).</li><li>The Headquarters requests the Designer API to get questionnaire providing information about what version of the questionnaire it supports. If the questionnaire in the Designer is erroneous (has errors) or the version of questionnaire on Designer is higher that Hadquarters supports error will be returned. The following results could be returned:</li></ol><ul><li><code>Unauthorized (401)</code> - User is not authorized to perform this action any more. Might be locked by admin during the import.</li><li><code>Forbidden (403)</code> - User has no access rights to this questionnaire. Shared status was revoked by owner.</li><li><code>Upgrade required (426)</code> - The Designer doesn&rsquo;t support old version of Headquarters.</li><li><code>ExpectationFailed (417)</code> - Questionnaire contains new features not supported by the Headquarters.</li><li><code>PreconditionFailed (412)</code> - Questionnaire contains errors.</li><li><code>NotFound (404)</code> - Questionnaire not found. Might be deleted from the server.</li><li><code>ServiceUnavailable (503)</code> - Server error occurred.</li><li><code>RequestTimeout (408)</code> - Response was not received within defined timeframe.</li></ul><ol start=4><li>If the previous step succeeded Headquarters requests backup archive and questionnaire preview files for the questionnaire (in every translation).</li><li>Headquarters starts assignments migration if the corresponding option for assignments migration was requested during the questionnaire import.</li></ol><h3 id=v-webtester-and-designer>V. WebTester and Designer</h3><h3 id=vi-tester-and-designer>VI. Tester and Designer</h3></div></article></div></main><footer class="footer pt-3 pb-1 px-sm-3 px-lg-0"><div class="container copyright"><div class=float-left>&#169; 2016-2025 The World Bank Group.<br>All rights Reserved. <a href=https://www.worldbank.org/en/about/legal _target=blank>Legal</a><br><a class=text-primary href=/about/ _target=blank><b class=text-primary>About the team</b></a>
<a class=text-primary href=https://www.capterra.com/p/153927/Survey-Solutions/ target=_blank>Testimonials</a></div></div></footer><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js></script><script src=https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js></script><script src=/js/asearch.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js></script><script>$(document).on("click",'[data-toggle="lightbox"]',function(e){e.preventDefault(),$(this).ekkoLightbox({alwaysShowClose:!0})})</script></body></html>